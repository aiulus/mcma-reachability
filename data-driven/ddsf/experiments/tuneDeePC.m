%% mode  -   Options: {
%                       'nt':       vary T_ini and N (prediction horizon) simultaneously,    
%                       'qr':       vary input (Q) and output (R) cost matrices simultaneously                 
%                       'mixed':    vary all of the above simulteneously
%          
%
%% systype   - Options: {'test', 'example0', 'cruise_control', 'quadrotor', 
%                        'inverted_pendulum', 'dc_motor', 'damper', 
%                        'thermostat', 'cstr'}
%           - Specifies the type of system to initialize.
%           - See systems\sysInit.m for details.

mode = 'nt';
systype = 'damper';

% #Simulation steps to be performed by (deepcTunerFlex >) runParamDPC.m
T_sim = 2;

% Whether the output CSV-file (containing simulation data) should be saved
% - configured to be true by default in deepcTunerFlex.m
toggle_save = 1;

%% Example parameter space initializations
vals_large = struct( ...
    'NvsTini', [ ... % value range for mode 'nt'
    1 * ones(6, 1), (5:5:30)'; ...
    2 * ones(6, 1), (5:5:30)'; ...
    5 * ones(5, 1), (10:5:30)'; ...
    10 * ones(4, 1), (15:5:30)' ...
    ], ...
    'QvsR', table2array(combinations(logspace(-2, 4, 7), logspace(-2, 2, 5))), ... % value range for mode 'qr'
    'mixed', struct( ... % value ranges for mode 'mixed'
                    'nt', [ ...
                    2 * ones(6, 1), (5:5:30)'; ...
                    5 * ones(5, 1), (10:5:30)'; ...
                    10 * ones(6, 1), (15:5:40)'
                    ], ...
                    'qr', table2array(combinations(logspace(-2, 1, 4), logspace(-2, 1, 4))) ...
                    ) ...
    );

% DEFAULT
vals = struct( ...
    'NvsTini', [ ... % value range for mode 'nt'
    2 * ones(6, 1), (5:5:30)'; ...
    5 * ones(5, 1), (10:5:30)'; ...
    ], ...
    'QvsR', table2array(combinations(logspace(-2, 1, 4), logspace(-2, 1, 4))), ... % value range for mode 'qr'
    'mixed', struct( ... % value ranges for mode 'mixed'
                    'nt', [ ...
                    2 * ones(6, 1), (5:5:30)'; ...
                    5 * ones(5, 1), (10:5:30)' ...
                    ], ...
                    'qr', table2array(combinations(logspace(-2, 1, 4), logspace(-1, 1, 1))) ...
                    ) ...
    );
                                                         
vals_N = struct( ...
    'NvsTini', [5 * ones(21, 1), (10:1:30)'], ...
    'QvsR', table2array(combinations(logspace(-2, 1, 4), logspace(-2, 1, 4))), ... % value range for mode 'qr'
    'mixed', struct( ... % value ranges for mode 'mixed'
                    'nt', [ ...
                    2 * ones(6, 1), (5:5:30)'; ...
                    5 * ones(5, 1), (10:5:30)' ...
                    ], ...
                    'qr', table2array(combinations(logspace(-2, 1, 4), logspace(-2, 1, 4))) ...
                    ) ...
    );    


[u, y, descriptions, filename] = deepcTunerFlex(mode, vals, systype, T_sim, toggle_save);

batchplot(filename);
